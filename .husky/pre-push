#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "üîÑ Running update scripts before pushing..."

# Ex√©cuter les mises √† jour automatiquement
npm run prepare-commit

# V√©rification des fichiers critiques
echo ""
echo "üîç Checking critical files (index.html and update.html)..."

# V√©rifier l'√©tat des fichiers critiques
CRITICAL_CHANGED=false

for file in "index.html" "update.html"; do
  if git diff --cached --name-only | grep -q "$file"; then
    echo "‚úÖ $file has been updated."
    CRITICAL_CHANGED=true
  else
    echo "‚ö†Ô∏è $file has NOT been updated."
  fi
done

# Petit bilan final
echo ""
if [ "$CRITICAL_CHANGED" = true ]; then
  echo "‚úÖ Critical updates detected. Proceeding with push."
else
  echo "‚ö†Ô∏è Warning: Critical files not updated. Please review before pushing."
fi